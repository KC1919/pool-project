<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>House of Pool</title>
    <link rel="icon" type="image/x-icon" href="/img/pool.ico">
    <link rel="stylesheet" href="/css/header.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="logout-btn-div" id="logout-btn-div">
      <button
        class="btn btn-danger btn-sm"
        id="logout-btn"
        onclick="logout(event)"
      >
        Logout
      </button>
    </div>
    <div class="navbar-div">
      <div class="nav-link-div">
        <div class="nav-home">
          <a
            class="link"
            href="/customer/allCustomers/1"
            onclick="handleHomeClick(event)"
            >Home</a
          >
        </div>
        <div class="nav-sales">
          <a
            class="link"
            href="/sale/getSales/1"
            onclick="handleSalesClick(event)"
            >Sales</a
          >
        </div>
        <div class="nav-stock">
          <a class="link" href="/item/getStock">Stock</a>
        </div>
        <div class="nav-membership">
          <a class="link" href="/membership/getMemberships">Membership</a>
        </div>
        <div class="nav-expense">
          <a class="link" href="/sale/expenses">Expenses</a>
        </div>
      </div>
    </div>

    <script>
      async function logout(e) {
        try {
          const response = await fetch("/auth/logout", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
          });

          const jsonResp = await response.json();
          // console.log(jsonResp);

          if (jsonResp.success == true) {
            window.location.href = "/";
          }
        } catch (error) {
          console.log("Failed to logout", error);
          alert("Failed to logout");
        }
      }

      async function handleHomeClick(e) {
        try {
          localStorage.setItem("page", 1);
        } catch (error) {
          console.log("Failed to set page number to 1");
        }
      }

      async function handleSalesClick(e) {
        try {
          localStorage.setItem("salesPageNumber", 1);
        } catch (error) {
          console.log("Failed to set page number to 1");
        }
      }
    </script>
    <!-- </body>
</html> -->
  </body>
</html>
